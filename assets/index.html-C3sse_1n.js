import{_ as i,c as a,a as n,o as l}from"./app-CMxuBucf.js";const e={};function t(h,s){return l(),a("div",null,s[0]||(s[0]=[n(`<h2 id="为什么要装nginx" tabindex="-1"><a class="header-anchor" href="#为什么要装nginx"><span>为什么要装Nginx</span></a></h2><h3 id="nginx-是什么" tabindex="-1"><a class="header-anchor" href="#nginx-是什么"><span>Nginx 是什么？</span></a></h3><p><strong>NGINX</strong>（发音为&quot;Engine-X&quot;）是一款高性能的开源Web服务器软件，也可以作为反向代理服务器、负载均衡器和HTTP 缓存。NGINX 的主要特点包括：</p><ol><li><p><strong>高并发和高性能</strong></p><ul><li>NGINX 采用事件驱动模型，与传统的基于线程或进程的模型不同，这使得它能够高效处理大量的并发连接，适用于高流量网站。</li><li>它能处理数以万计的并发连接，而不会占用过多的资源。</li></ul></li><li><p><strong>反向代理与负载均衡</strong></p><ul><li>除了作为 Web 服务器，NGINX 还被广泛用于反向代理和负载均衡。</li></ul></li><li><p><strong>缓存功能</strong></p><ul><li>NGINX 具有强大的缓存机制，能够减少对后端服务器的请求，从而提升系统的性能。</li></ul></li><li><p><strong>支持静态文件和动态内容</strong></p><ul><li>NGINX 可以处理静态内容（如HTML、图片、视频）以及通过 FastCGI、uWSGI 等接口处理动态内容。</li></ul></li></ol><h3 id="反向代理是什么" tabindex="-1"><a class="header-anchor" href="#反向代理是什么"><span>反向代理是什么？</span></a></h3><p><strong>反向代理</strong>, 是指客户端（如浏览器）通过代理服务器访问其他服务器资源的过程。与正向代理不同，正向代理是代理客户端的请求，而反向代理则是代理服务器的请求。具体来说：</p><ul><li><p><strong>正向代理</strong>：客户端通过代理服务器去访问外部资源。客户端知道代理服务器的存在，代理服务器代表客户端向外部资源发出请求，响应再返回给客户端。比如，有些公司内网会通过正向代理访问互联网。</p></li><li><p><strong>反向代理</strong>：客户端并不知道代理服务器的存在。客户端的请求被发送到反向代理服务器，然后反向代理服务器再转发请求到实际的后端服务器，并将响应返回给客户端。客户端以为它直接与后端服务器交互，但实际上是与反向代理服务器交互。</p></li></ul><p><strong>反向代理的工作流程</strong>：</p><ol><li>客户端发起请求：客户端（如浏览器）向某个域名发送请求。</li><li>反向代理接收到请求：请求首先到达反向代理服务器。反向代理服务器充当中介，将请求转发给真实的后端服务器。</li><li>后端服务器处理请求：后端服务器处理请求并生成响应。</li><li>反向代理转发响应：反向代理将后端服务器的响应返回给客户端。</li></ol><p><strong>反向代理的优点</strong>：</p><ol><li><p>负载均衡：</p><p>反向代理可以将来自客户端的请求分配到多个后端服务器上，从而平衡各个服务器的负载，提高系统的可扩展性和可靠性。</p></li><li><p>提高安全性：</p><p>反向代理可以隐藏内部服务器的细节和网络架构，防止客户端直接访问后端服务器，提高系统的安全性。</p></li><li><p>SSL/TLS 终止：</p><p>反向代理服务器可以承担加密/解密（SSL/TLS 终止），从而减少后端服务器的负担。</p></li><li><p>缓存：</p><p>反向代理可以缓存常用的请求响应，减少对后端服务器的访问，提升系统性能。</p></li><li><p>统一入口：</p><p>通过反向代理，可以将多个后端服务统一暴露为一个入口，简化客户端访问路径。</p></li></ol><h2 id="安装nginx" tabindex="-1"><a class="header-anchor" href="#安装nginx"><span>安装nginx</span></a></h2><p>安装Nginx之前，先安装一些依赖。</p><ul><li>步骤1. 安装gcc g++的依赖库</li></ul><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> build-essential</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> libtool</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>步骤2. 安装pcre依赖库</li></ul><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> update</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> libpcre3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> libpcre3-dev</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>步骤3. 安装zlib依赖库</li></ul><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> zlib1g-dev</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>步骤4. 安装ssl依赖库</li></ul><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> openssl</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>步骤5. 安装Nginx</li></ul><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="nginx常用命令" tabindex="-1"><a class="header-anchor" href="#nginx常用命令"><span>nginx常用命令</span></a></h2><div class="language-shell line-numbers-mode" data-ext="shell" data-title="shell"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> start</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 启动nginx</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stop</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">   # 停用nginx</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> restart</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 重启nginx</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> reload</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">   # 修改配置后，重新加载配置，不重启服务</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> status</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">   # 查看nginx运行状态</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -t</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    #检查配置文件是否正常</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> systemctl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> enable</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nginx</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 设置开机启动</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="配置静态站点" tabindex="-1"><a class="header-anchor" href="#配置静态站点"><span>配置静态站点</span></a></h2><p>修改/etc/nginx/sites-available/default文件，可以配置可用站点</p><h2 id="配置ssl证书" tabindex="-1"><a class="header-anchor" href="#配置ssl证书"><span>配置SSL证书</span></a></h2><ul><li>步骤1. 申请证书，并下载</li><li>步骤2. 在nginx配置目录下，创建放置证书的目录。比如/etc/nginx/ssl</li><li>步骤3. 将证书放置在上述目录下</li><li>步骤4. 在nginx配置文件里，添加如下配置</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx" data-title="nginx"><button class="copy" title="Copy code" data-copied="Copied"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#...</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#...</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">server</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> {</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    listen </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">443</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ssl</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    server_name </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">www.nginxdocs.com</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    ssl_certificate </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/etc/nginx/ssl/nginxdocs.crt</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    ssl_certificate_key </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/etc/nginx/ssl/nginxdocs.key</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    location</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> / </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">{</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        root </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">/usr/share/nginx/html</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">        index </span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">index.html index.htm</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">    }</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,30)]))}const d=i(e,[["render",t],["__file","index.html.vue"]]),k=JSON.parse('{"path":"/learn/om/vLu6E/","title":"nginx","lang":"en-US","frontmatter":{"title":"nginx","createTime":"2025/01/13 20:38:43","permalink":"/learn/om/vLu6E/","author":"Jack","tags":["运维","反向代理服务器","代理"],"description":null},"headers":[],"readingTime":{"minutes":3.93,"words":1179},"git":{"updatedTime":1738563115000,"contributors":[{"name":"美神猎手","username":"美神猎手","email":"meishenlieshou@users.noreply.github.com","commits":1,"avatar":"https://avatars.githubusercontent.com/美神猎手?v=4","url":"https://github.com/美神猎手"}],"changelog":[{"hash":"fd2ce90f6eeccfdbe9738314bd72c6df1305b3f3","date":1738563115000,"email":"meishenlieshou@users.noreply.github.com","author":"美神猎手","message":"更新 News in React19.md","commitUrl":"https://github.com/meishenlieshou/note/commit/fd2ce90f6eeccfdbe9738314bd72c6df1305b3f3"}]},"filePathRelative":"notes/learn/om/nginx.md","bulletin":false}');export{d as comp,k as data};
