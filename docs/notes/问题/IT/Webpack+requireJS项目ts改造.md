---
title: Webpack+requireJS项目ts改造
createTime: 2024/11/01 02:36:44
permalink: /pit/on5h7so2/
---

# Webpack+requireJS项目ts改造

## 背景

从2015年起为公司开发的一款报表工具，维护至今一直没有机会重构。所用技术栈也比较陈旧，从最开始的RequireJS+命令行调用打包压缩，到后来2023年左右实在无法忍受和时代割裂太久，引入Webpack工具链，对项目进行了一次工程化升级。

这以后，代码管理和构建有了一定的提升，而且可以在开发中使用比较新的JS规范、编程特性。

但有个严重问题，一直没得到改善：工程庞大以后，JS项目变得异常难以维护，小功能修改常常带出新问题。即使项目的每一行代码出自本人之手，当时间长了，自己也难以快速理清模块之间的、或模块内部的逻辑关系。最突出的便是模块和模块，函数和函数之间调用常常伴随着复杂数据结构的关联。JS的动态特性，导致这些数据结构无需提前定义，或者约束。分散在各处的代码用到这些结构，随时可以扩展修改它。

软件应用开发中，业务功能逻辑实际上和数据结构是紧密相关联的。数据结构难以理清，就导致了代码阅读难度大大提高。

可想而知，10年来累计至今的一块自研敏捷BI报表工具，其庞大的代码量对于日常维护和扩展，会构成怎样的挑战。

迫切需要引入强有力的规范。

## Typescript

Typescript作为JS的一个超集，其强类型约束和静态类型检测等特征，很符合解决目前问题的需要。

## 挑战

-- 大量的require引用语句需要逐步过渡到import
-- 很多依赖模块过于陈旧，他们并没有提供ts支持

## 改造历程

### 安装typescript

```shell
npm install --save-dev typescript
```

### 初始化 tsconfig.json 配置文件

```shell
npx tsc --init
```

### 配置 tsconfig.json
